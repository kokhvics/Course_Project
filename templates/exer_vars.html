<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smarty</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='exers.css') }}">
</head>
<body>
<div class="container fade-in">
    <div style="display: flex; flex-direction: column;">
        <div class="top-rectangle" style="display: flex; flex-direction: row;">
            <div class="empty-place"></div>
            <div class="empty-circle-top"></div>
            <div class="empty-circle-top"></div>
            <div class="empty-circle-top"></div>
        </div>
        <div style="display: flex; justify-content: center; align-items: center;">
            <div class="left-bottom-rectangle" style="margin-right: 20px; display: flex; flex-flow: column wrap;">
                <div class="left-text-box" id="exercise-container"></div>
            </div>
            <div style="display: flex; flex-direction: column;">
                <div style="display: flex; flex-direction: row;">
                    <button class="variant-box">
                        <div class="variant-text-box" id="variant-1"></div>
                    </button>
                    <button class="variant-box">
                        <div class="variant-text-box" id="variant-2"></div>
                    </button>
                </div>
                <div style="display: flex; flex-direction: row;">
                    <button class="variant-box">
                        <div class="variant-text-box" id="variant-3"></div>
                    </button>
                    <button class="variant-box">
                        <div class="variant-text-box" id="variant-4"></div>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<script>

    // Получаем параметр exercise из URL
    const urlParams = new URLSearchParams(window.location.search);
    // Получаем параметр exercise из URL и декодируем его
    const exercise = decodeURIComponent(urlParams.get('exercise'));
    console.log(exercise);

    // Отображаем текст задания в блоке 'exercise-container'
    document.getElementById('exercise-container').textContent = exercise;

    // Функция для загрузки вариантов ответов
    function loadExerciseVariants() {
        // Выполняем запрос к базе данных для получения текста задания и вариантов ответов
        fetch('/retrieve_exercises_with_answers?exr_text=' + encodeURIComponent(exercise))
            .then(response => response.json())
            .then(data => {
                // Заполняем блоки вариантов ответов соответствующими значениями
                document.getElementById('variant-1').textContent = data[0][1]; // exr_ans_1
                document.getElementById('variant-2').textContent = data[0][2]; // exr_ans_2
                document.getElementById('variant-3').textContent = data[0][3]; // exr_ans_3
                document.getElementById('variant-4').textContent = data[0][4]; // exr_ans_4
            })
            .catch(error => console.error('Ошибка загрузки вариантов ответов:', error));
    }

    // Вызываем функцию загрузки вариантов ответов
    loadExerciseVariants();

</script>

</body>
</html>